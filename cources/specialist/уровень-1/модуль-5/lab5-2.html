<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<html>
<head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
</head>

<body>
<h1></h1>

<script type="text/javascript">


    // broken
    function subStrCount (input, needle, offset, length) {
        var cnt = 0;
        if (isNaN(offset)) {offset = 0;}
        if (isNaN(length)) {length = 0;}

        if (length > 0 && offset > 0) {
            if ((offset + length) > input.length) {
                return -1;
            } else {
                input = input.substring(offset, offset + length);
            }
        }

        offset = -1;
        while ((offset = input.indexOf(needle, offset + 1)) != -1) {
            cnt++;
        }
        return cnt;
    }

    console.log(subStrCount("good gollly miss moolly", "oo", 7, 10));
</script>

</body>
</html>


























