# 2.1 Поиск в DOM

## 2.2 Селектор потомков

_Задание._
На странице с экскурсиями, в связи с появлением новых предложений, планируются некоторые изменения. Для начала, нужно выбрать все элементы списка #tours с помощью [селектора потомка](http://api.jquery.com/descendant-selector/) (descendant). 
```html
<div id="tours-wrapper">
    <h1>Guided Tours</h1>
    <ul id="tours">
        <li class="america">
            <h2>New York, New York</h2>
            <span class="details">$1,899 for 7 nights</span>
            <ul class="vote">
                <li><a href="#">↑</a></li>
                <li><a href="#">↓</a></li>
            </ul>
        </li>
        <li class="europe">
            <h2>Paris, France</h2>
            <span class="details">$2,499 for 7 nights</span>
            <ul class="vote">
                <li><a href="#">↑</a></li>

                <li><a href="#">↓</a></li>
            </ul>
        </li>
        <li class="europe sale">
            <h2>Madrid, Spain</h2>
            <span class="details">$1,577 for 5 nights</span>
            <ul class="vote">
                <li><a href="#">↑</a></li>
                <li><a href="#">↓</a></li>
            </ul>
        </li>
        <li class="asia">
            <h2>Tokyo, Japan</h2>
            <span class="details">$1,999 for 5 nights</span>
            <ul class="vote">
                <li><a href="#">↑</a></li>
                <li><a href="#">↓</a></li>
            </ul>
        </li>

    </ul>
    <ul class="sorting">
        <li><a href="#">America</a></li>
        <li><a href="#">Europe</a></li>
        <li><a href="#">Asia</a></li>
    </ul>
</div>
```

_Решение._
Выберем все элементы li списка с id tours:
```javascript
$('#tours li')
```

_Пояснение._
Команда типа `$('предок потомок')` позволяет выбрать все элементы-потомки данного предка. В качестве "предка" можно использовать любой валидный селектор, а в качестве "потомка" - селектор для фильтрации элементов-потомков.

## 2.3 Выбор непосредственных наследников

_Задание._
Похоже, мы получили больше, чем просто список элементов для туров, мы также выбрали все элементы списков vote. Используя [прямой дочерний (child) селектор](http://api.jquery.com/child-selector/), выберем только элементы списка tour.

_Решение._
Немного подкорректируем нашу команду так, чтобы были выбранны только первоуровневые потомку списка tours (дети, а не внуки, правнуки и тд):
```javascript
$("#tours > li")
```

_Пояснение._
Радиус предыдущей команды можно сузить, добавив между элементами  символ ">" `$('родитель > ребёнок')`. Это поможет выбрать все прямые дочерние элементы (ребёнок) определённого "родителя".

## 2.4 Выбор нескольких элементов

_Задание._
Представим, что мы пытаемся отсортировать туры на странице. Нужно выбрать все туры из Азии, а также некоторые из тех, которые находятся на распродаже. Для этого используем [составной (multiple) селектор](http://api.jquery.com/multiple-selector/) с классами .asia и .sale. 

_Решение._
Выберем требуемые туры, разделяя их запятой:
```javascript
$('.asia, .sale­')
```

_Пояснение._
Чтобы выбрать несколько селекторов одновременно, воспользуемся составным селектором `$('селектор1, селектор2, селекторN')`. Количество указанных селекторов может быть любым. Порядок элементов DOM в возвращённом объекте jQuery может отличаться от порядка, используемого в документе.

## 2.5 Псевдо селектор first

_Задание._
Проверим селектор для нахождения первого тура в списке. Используя псевдо-селектор [first](http://api.jquery.com/first-selector/), выбрать первый пункт назначения в списке tours.

_Решение._
В списке to­urs выберем первый пункт:
```javascript
$ ('#to­urs li:fi­rst')
```

_Пояснение._
Селектор `:first` выбирает первый из соответствующих элементов. В jQuery, как и в css, существует ряд псевдо-классов, которые можно узнать по двоеточию поред именем.

## 2.6 Селектор :even

_Задание._
Хотелось бы изменить часть дизайна, добавив чередование полос списка. Это можно сделать только с помощью css, но использовать ещё и JavaScript, звучит забавно. В первую очередь, нужно выбрать каждый чётный тур. Сделаем это, используя [псевдо-селектор :even](http://api.jquery.com/even-selector/). 

_Решение._
В списке tours выберем все дочерние, чётные элементы li:
```javascript
$('#tours > li:ev­en')
```

_Пояснение._
Псевдо-селектор `:ev­en` позволяет выбрать все чётные элементы. Стоит заметить, что нумерация элементов начинается с 0, поэтому будут выбраны первый элемент (с индексом 0) и третий (с индексом 2).   
PS. Чтобы найти последний элемент, используем псевдо-класс `:last`. Всё не чётные элементы станут доступны при использовании `:odd`.

# 2.7 Обход DOM

## 2.8 Использование find()

_Задание._
В предыдущем разделе мы узнали, как выбрать все vacations из America с помощью `$("#vacations .america")`. Это работает, но может быть быстрее. Изменим код на обход с методом [find()](http://api.jquery.com/find/).

_Решение._
Превратим потомственный селектор в аргумент метода find­():
```javascript
$('#vacati­ons').find­('.america­')
```

_Пояснение._
Вместо потомственных (descendant) селекторов можно использовать обходные (traversing). Второй метод состоит из двух частей: селектора и обхода. Так команда `$('предок потомок')` выбирает те же элементы, что и `$('предок').('потомок')`. Код становится немного больше, но элемент ищется быстрее.   
Метод find­() даёт возможность получить потомков каждого текущего элемента. В качестве аргумента может содержать: селектор (в виде строки), селекшен (в виде объекта jQuery) и элемент.

## 2.9 Использование first()

_Задание._
Добавим на сайт возможность 'feeling lucky', где первый vacation будет выбран по умолчанию. Используя обход или фильтрацию, выберем первый ([first](http://api.jquery.com/first/)) элемент li из списка vacations.

_Решение._
Для начала перейдём ко всем элементам li из списка vacations, а затем выберем первый из них:
```javascript
$('#vacati­ons li').­first()
```

_Пояснение._
Метод ­first() позволяет выбрать первый элемент в наборе подобных. Этот метод не принимает никаких аргументов.

## 2.10 Использование last()

_Задание._
Просматривая код, мы заметили, что кто-то выборал последний vacation с: `$("#vacations li:last")`. Глядя на это, можно подумать: "Обход сделает этот путь быстрее!". Придерживаясь этих мыслей, отрефакторим код, чтобы найти последний ([last](http://api.jquery.com/last/)) элемент li внутри #vacations, заменив код на обходной. 

_Решение._
Преобразуем псевдо-класс :last в метод: 
```javascript
$('#vacati­ons li').­last()
```

_Пояснение._
Метод ­last() позволяет выбрать последний элемент в наборе подобных. Этот метод не принимает никаких аргументов.

## 2.11 Использование prev()

_Задание._
Принято решение, что второй с конца vacation всегда будет на распродаже. Используя обход, найти способ, чтобы выбрать этот vacation. При этом нельзя использовать класс континента (europe, asia, america), так как его содержимое может изменяться.

_Решение._
К написанному в предыдущем задании коду добавим метод [pre­v()](http://api.jquery.com/prev/), который позволит нам выбрать идущий перед последним элемент:
```javascript
$("#vacati­ons li").­last().pre­v()
```

_Пояснение._
Метод pre­v() даёт доступ к сестре, непосредственно предшествующей элементу; опционально может фильтровать по селектору.

## 2.12 Обход вверх

_Задание._
Добавим некоторые эффекты для всего featured vacations, не смотря на то, что только заголовок имеют этот класс. Используя обход, выберем все туры, которые содержат в своём заголовке класс featured, извлекая их родителя ([parent()](http://api.jquery.com/parent/)).

_Решение._
Выберем родителей, чьи дети имеют класс featured:
```javascript
$('.featur­ed').paren­t()
```

_Пояснение._
С помощью метода paren­t() можно извлеч родителя каждого элемента в текущем наборе равнозначных элементов; опционально может фильтровать по селектору.

## 2.13 Обход вниз

_Задание._ 
Оглядываясь назад, вернёмся к старому коду, который мы использовали, чтобы выбрать все туры: `$('#tours > li')`. Сделаем этот код лучше, используя обход.

_Решение._
Выберем непосредственных наследников #tours, используя обходной метод [children­()](http://api.jquery.com/children/):
```javascript
$('#tours'­).children­()
```

_Пояснение._
Метод children­() позволяет выбрать всех детей каждого элемента в текущем наборе равнозначных элементов; опционально может фильтровать по селектору.